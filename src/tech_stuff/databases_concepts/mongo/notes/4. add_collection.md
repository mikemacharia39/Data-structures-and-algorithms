# Managing a collection in a database

## Types of collections

### 1. Capped Collection 
A capped collection limits the size and the maximum number of documents. If a capped collection reaches the maximum size or maximum number of documents, the older documents are removed. We require three additional options to create a capped collection, as listed below:
  - capped (boolean): We set this value to true to create a capped collection
  - size: Maximum size in bytes
  - max: Maximum number of documents

Properties of a capped collections: 
  - Fixed size collection
  - Maximum number of documents
  - Maximum size of the collection
  - When the collection reaches the maximum size, the oldest documents are removed
  - Useful for logging, cache, etc.
  - The order of the documents is maintained
  - The insertion order is maintained

Below is an example of creating a capped collection:
````
db.createCollection("log", {
    capped : true, 
    size : 5242880, 
    max : 50000
});
````
Older logs are often not relevant. In such cases, we use the capped collection to rotate logs. Therefore, we add new logs and remove the older ones.

### 2.  Time series collection

## Adding a Collection

````
use school
db.students.insertOne({
    name: "John",
    age: 30,
    subjects: ["Math", "Science"]
})
````

## Add another collection with options

````
use school

db.createCollection("teachers", {
    capped: true,            // This is a capped collection
    size: 10000,             // Maximum size of the collection in bytes, this is 10KB
    max: 100                 // Maximum number of documents in the collection
}, {
   autoIndexId: true
}
)
````

## To view the collections in the database


## To drop collection

````
>> use school
>> db.students.drop()

true
````


````
use school
show collections
````

## Show collection structure

````
use school
db.students.find().pretty()
````

Can we see the data types of the fields in the collection? Yes
````
>> use school

>> typeof db.students.findOne().name

string

>> typeof db.students.findOne().age

number
````


## To view the documents in a collection

````
use school
db.students.find()
````

## To view one document in a collection

````
use school
db.students.findOne()
````

## To add many documents to a collection

````
use school
db.students.insertMany([
    {
        name: "Jane",
        age: 25,
        subjects: ["Math", "Business"]
    },
    {
        name: "Doe",
        age: 35,
        subjects: ["Economics", "Science"]
    }
])
````